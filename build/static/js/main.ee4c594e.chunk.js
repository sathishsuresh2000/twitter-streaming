(this["webpackJsonptwitter-streaming"]=this["webpackJsonptwitter-streaming"]||[]).push([[0],{107:function(e,t,a){e.exports=a(169)},162:function(e,t){},165:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),s=a.n(c),o=a(31),i=a(19),l=a(101),E=a(61),m=a(15),u={list:[],loading:!1,newMessageCount:0,error:""},d=Object(i.combineReducers)({messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MESSAGES_INIT":return Object(m.a)(Object(m.a)({},e),{},{loading:!0});case"FETCH_MESSAGES_SUCCEEDED":return Object(m.a)(Object(m.a)({},e),{},{list:t.messages,error:"",loading:!1});case"FETCH_MESSAGES_FAILED":return Object(m.a)(Object(m.a)({},e),{},{error:t.error,list:[],loading:!1});case"FETCH_NEW_MESSAGES_INIT":return Object(m.a)(Object(m.a)({},e),{},{loading:!0});case"FETCH_NEW_MESSAGES_SUCCEEDED":return Object(m.a)(Object(m.a)({},e),{},{list:[].concat(Object(E.a)(t.messages),Object(E.a)(e.list)),error:"",loading:!1,newMessageCount:0});case"FETCH_NEW_MESSAGES_FAILED":return Object(m.a)(Object(m.a)({},e),{},{error:t.error,list:[],loading:!1});case"SET_NEW_MESSAGE_COUNT":return Object(m.a)(Object(m.a)({},e),{},{newMessageCount:t.count});default:return e}}}),g=a(22),h=a.n(g),S=a(14),b=a(91),p=a.n(b),w=a(60),v=a.n(w),f={message:{list:"/messages",newMessages:"/messages/new"}},_=a(92),C=a.n(_)()({path:"/socket",transports:["websocket"],reconnection:!0,reconnectionDelay:3e3,reconnectionDelayMax:6e3,reconnectionAttempts:"Infinity"});C.on("connect",(function(){}));var O=C,j=h.a.mark(N),y=h.a.mark(T),M=h.a.mark(A),x=h.a.mark(F);function N(e){var t,a,n;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(S.b)({type:"FETCH_MESSAGES_INIT"});case 3:if(!e.term){r.next=14;break}return t=f.message.list,r.next=7,Object(S.a)(v.a.get,t,{params:{keyword:e.term}});case 7:return a=r.sent,n=p.a.get("sessionId"),O.emit("start_message_stream",{sessionId:n,keyword:e.term}),r.next=12,Object(S.b)({type:"FETCH_MESSAGES_SUCCEEDED",messages:a.data.result});case 12:r.next=16;break;case 14:return r.next=16,Object(S.b)({type:"FETCH_MESSAGES_SUCCEEDED",messages:[]});case 16:r.next=23;break;case 18:return r.prev=18,r.t0=r.catch(0),console.log(r.t0),r.next=23,Object(S.b)({type:"FETCH_MESSAGES_FAILED",error:r.t0});case 23:case"end":return r.stop()}}),j,null,[[0,18]])}function T(e){var t,a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(S.b)({type:"FETCH_NEW_MESSAGES_INIT"});case 3:if(!e.term){n.next=12;break}return t=f.message.newMessages,n.next=7,Object(S.a)(v.a.get,t,{params:{keyword:e.term}});case 7:return a=n.sent,n.next=10,Object(S.b)({type:"FETCH_NEW_MESSAGES_SUCCEEDED",messages:a.data.result});case 10:n.next=14;break;case 12:return n.next=14,Object(S.b)({type:"FETCH_NEW_MESSAGES_SUCCEEDED",messages:[]});case 14:n.next=21;break;case 16:return n.prev=16,n.t0=n.catch(0),console.log(n.t0),n.next=21,Object(S.b)({type:"FETCH_NEW_MESSAGES_FAILED",error:n.t0});case 21:case"end":return n.stop()}}),y,null,[[0,16]])}function A(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(S.b)({type:"SET_NEW_MESSAGE_COUNT",count:e.count});case 2:case"end":return t.stop()}}),M)}function F(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.c)("FETCH_MESSAGES",N);case 2:return e.next=4,Object(S.c)("FETCH_NEW_MESSAGES",T);case 4:return e.next=6,Object(S.c)("NEW_MESSAGE_COUNT",A);case 6:case"end":return e.stop()}}),x)}var k=a(93),G=Object(l.a)(),D=Object(i.createStore)(d,Object(k.composeWithDevTools)(Object(i.applyMiddleware)(G)));G.run(F);var H=D,W=(a(165),a(100)),I=a(206),U=a(210),L=a(218),B=a(219),Y=a(97),$=a.n(Y),J=Object(I.a)((function(e){return{root:{display:"flex",justifyContent:"space-between"},searchField:{width:"100%"},searchFieldWithButton:{width:"80%"}}}));var R=Object(o.b)((function(e){return{newMessageCount:e.messages.newMessageCount}}),(function(e){return{search:function(t){return e({type:"FETCH_MESSAGES",term:t})},getNewMessages:function(t){return e({type:"FETCH_NEW_MESSAGES",term:t})},setNewMessagesCount:function(t){return e({type:"NEW_MESSAGE_COUNT",count:t})}}}))((function(e){var t=J(),a=e.search,c=e.getNewMessages,s=Object(n.useState)(""),o=Object(W.a)(s,2),i=o[0],l=o[1],E=e.newMessageCount,m=e.setNewMessagesCount;return Object(n.useEffect)((function(){O.on("new_messages",(function(e){console.log("new_messages",e),m(e.result)}))}),[]),r.a.createElement("div",{className:t.root},r.a.createElement(L.a,{id:"outlined-secondary",label:"Search",variant:"outlined",color:"primary",className:0===E?t.searchField:t.searchFieldWithButton,onChange:function(e){var t=e.currentTarget.value;l(t)},value:i,onKeyPress:function(e){"Enter"===e.key&&a(i)}}),E>0&&r.a.createElement(U.a,{color:"secondary",badgeContent:E},r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:function(e){c(i)}},"load more",r.a.createElement($.a,{fontSize:"large"}))))})),z=a(211),K=a(212),P=a(213),q=a(214),Q=a(220),V=a(52),X=a(98),Z=a.n(X),ee=Object(I.a)((function(e){return{messages:{display:"flex",justifyContent:"center",flexDirection:"column",marginBottom:25},root:{width:"100%",marginTop:25},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},empty:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(1),height:400},loader:{display:"flex",marginTop:25,justifyContent:"space-evenly"}}}));var te=Object(o.b)((function(e){return e}),null)((function(e){var t=ee(),a=function(e){return e.replace(/(^|[^@\w])@(\w{1,15})\b/g,'$1<a href="http://twitter.com/$2" target="_blank">@$2</a>')},n=e.messages,c=n.list,s=n.loading;return r.a.createElement("section",{className:t.messages},s?r.a.createElement("div",null,r.a.createElement("div",{className:t.loader},r.a.createElement(z.a,{animation:"wave",variant:"circle",width:60,height:60}),r.a.createElement(z.a,{animation:"wave",variant:"rect",width:"95%",height:60})),r.a.createElement("div",{className:t.loader},r.a.createElement(z.a,{animation:"wave",variant:"circle",width:60,height:60}),r.a.createElement(z.a,{animation:"wave",variant:"rect",width:"95%",height:60})),r.a.createElement("div",{className:t.loader},r.a.createElement(z.a,{animation:"wave",variant:"circle",width:60,height:60}),r.a.createElement(z.a,{animation:"wave",variant:"rect",width:"95%",height:60})),r.a.createElement("div",{className:t.loader},r.a.createElement(z.a,{animation:"wave",variant:"circle",width:60,height:60}),r.a.createElement(z.a,{animation:"wave",variant:"rect",width:"95%",height:60})),r.a.createElement("div",{className:t.loader},r.a.createElement(z.a,{animation:"wave",variant:"circle",width:60,height:60}),r.a.createElement(z.a,{animation:"wave",variant:"rect",width:"95%",height:60}))):c.length?c.map((function(e,n){return r.a.createElement(K.a,{className:t.root,key:n},r.a.createElement(P.a,{avatar:r.a.createElement(Q.a,{alt:"Remy Sharp",src:e.user.profile_background_image_url}),title:e.user.name,subheader:Z()(e.createdTime).format("MMMM Do YYYY, h:mm:ss a")}),r.a.createElement(q.a,null,r.a.createElement(V.a,{color:"textSecondary"},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:a(e.text)}}))))})):r.a.createElement("div",{className:t.empty},r.a.createElement(V.a,{variant:"h6",color:"textSecondary"},"No message Found")))})),ae=a(215),ne=Object(I.a)((function(e){return{root:{marginTop:25}}}));var re=function(){var e=ne();return r.a.createElement(ae.a,{maxWidth:"md",className:e.root},r.a.createElement(R,null),r.a.createElement(te,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ce=a(216),se=a(99),oe=a(217),ie=Object(se.a)({palette:{type:"dark"}});s.a.render(r.a.createElement(ce.a,{theme:ie},r.a.createElement(oe.a,null),r.a.createElement(o.a,{store:H},r.a.createElement(re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[107,1,2]]]);
//# sourceMappingURL=main.ee4c594e.chunk.js.map